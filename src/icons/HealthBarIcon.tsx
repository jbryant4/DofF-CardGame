import { forwardRef, useEffect, useState } from 'react';

type OwnProps = React.SVGProps<SVGSVGElement> & { size?: number; hp: number };

const HealthBarIcon = forwardRef<SVGSVGElement, OwnProps>(
  ({ size = 100, hp, ...props }, ref) => {
    const [health, setHp] = useState(0);

    useEffect(() => {
      if (!hp) return;
      setHp(hp);
    }, [hp]);

    return hp === undefined ? null : (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width={size}
        height={size}
        {...props}
        ref={ref}
        version="1.1"
        viewBox="0 0 100 100"
      >
        <g>
          <path
            fill="red"
            d="m82.547 35.191h-66.148c-5.9219 0-10.738 5.8828-10.738 13.105v3.4102c0 7.2227 4.8164 13.105 10.738 13.105h66.148c5.9219 0 10.738-5.8828 10.738-13.105v-3.4102c0-7.2266-4.8164-13.105-10.738-13.105zm7.9414 16.512c0 5.6875-3.5625 10.309-7.9453 10.309h-66.145c-4.3789 0-7.9414-4.6211-7.9414-10.309v-3.4102c0-5.6836 3.5625-10.309 7.9414-10.309h66.148c4.3828 0 7.9453 4.625 7.9453 10.309v3.4102z"
          />
          <path
            fill={hp >= 8 ? 'red' : 'none'}
            d="m82.133 42.027c-1.8945 0-3.4336 1.1758-3.4336 2.625v10.691c0 1.4531 1.5391 2.625 3.4336 2.625 1.8945 0 3.4336-1.1719 3.4336-2.625v-10.691c0-1.4492-1.5391-2.625-3.4336-2.625z"
          />
          <path
            fill={hp >= 7 ? 'red' : 'none'}
            d="m72.801 42.027c-1.8945 0-3.4336 1.1758-3.4336 2.625v10.691c0 1.4531 1.5391 2.625 3.4336 2.625s3.4336-1.1719 3.4336-2.625v-10.691c0-1.4492-1.5391-2.625-3.4336-2.625z"
          />
          <path
            fill={hp >= 6 ? 'red' : 'none'}
            d="m63.473 42.027c-1.8945 0-3.4375 1.1758-3.4375 2.625v10.691c0 1.4531 1.543 2.625 3.4375 2.625 1.8945 0 3.4375-1.1719 3.4375-2.625v-10.691c0-1.4492-1.5469-2.625-3.4375-2.625z"
          />
          <path
            fill={hp >= 5 ? 'red' : 'none'}
            d="m54.141 42.027c-1.8945 0-3.4375 1.1758-3.4375 2.625v10.691c0 1.4531 1.543 2.625 3.4375 2.625s3.4336-1.1719 3.4336-2.625v-10.691c0-1.4492-1.5391-2.625-3.4336-2.625z"
          />
          <path
            fill={hp >= 4 ? 'red' : 'none'}
            d="m44.809 42.027c-1.8984 0-3.4375 1.1758-3.4375 2.625v10.691c0 1.4531 1.5391 2.625 3.4375 2.625 1.8945 0 3.4336-1.1719 3.4336-2.625l0.003906-10.691c0-1.4492-1.5391-2.625-3.4375-2.625z"
          />
          <path
            fill={hp >= 3 ? 'red' : 'none'}
            d="m35.477 42.027c-1.8945 0-3.4336 1.1758-3.4336 2.625v10.691c0 1.4531 1.543 2.625 3.4336 2.625 1.8984 0 3.4336-1.1719 3.4336-2.625v-10.691c0-1.4492-1.5352-2.625-3.4336-2.625z"
          />
          <path
            fill={hp >= 2 ? 'red' : 'none'}
            d="m26.145 42.027c-1.8945 0-3.4336 1.1758-3.4336 2.625v10.691c0 1.4531 1.5391 2.625 3.4336 2.625 1.8984 0 3.4336-1.1719 3.4336-2.625l0.003906-10.691c0-1.4492-1.5391-2.625-3.4375-2.625z"
          />
          <path
            fill={hp >= 1 ? 'red' : 'none'}
            d="m16.816 42.027c-1.8945 0-3.4336 1.1758-3.4336 2.625v10.691c0 1.4531 1.5391 2.625 3.4336 2.625 1.8984 0 3.4336-1.1719 3.4336-2.625v-10.691c0-1.4492-1.5391-2.625-3.4336-2.625z"
          />
        </g>
      </svg>
    );
  }
);

export default HealthBarIcon;
